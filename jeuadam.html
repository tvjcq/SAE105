<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="stylecommun.css" />
    <link rel="stylesheet" href="jeuadam.css" />
    <title>Document</title>
  </head>
  <body>
    <a href="index.html" class="lien-accueil">
      <img src="assets/icone-maison.png" alt="" id="icone-maison" />
    </a>
    <div class="reseaux">
      <a
        href="https://www.instagram.com/iutbeziers"
        target="_blank"
        id="lien-insta"
      >
        <img src="assets/logoinsta.png" alt="" />
      </a>
      <a
        href="https://www.facebook.com/iutbeziers"
        target="_blank"
        id="lien-facebook"
      >
        <img src="assets/logofacebook.png" alt="" />
      </a>
      <a
        href="https://twitter.com/iutbeziers"
        target="_blank"
        id="lien-twitter"
      >
        <img src="assets/logotwitter.png" alt="" />
      </a>
      <a
        href="https://www.youtube.com/channel/UCB5WebOLwb2upoCgQCrkJHg"
        target="_blank"
        id="lien-youtube"
      >
        <img src="assets/logoyoutube.jpg" alt=""
      /></a>
      <a href="https://www.iutbeziers.fr/" target="_blank" id="lien-site"
        ><img src="assets/logosite.jpg" alt=""
      /></a>
    </div>
    <h1>Le jeu du tcheck !</h1>
    <section id="visite">
      <a href="sallemac.html" class="bouton" id="boutonretour">
        <img
          src="assets/fleche.png"
          alt=""
          class="bouton-image"
          id="boutonretour-image"
        />
      </a>
      <button id="commencer">Commencer !</button>
      <p id="timer"></p>
      <button id="jeu"></button>
      <div id="fin">
        <p>Vous avez tcheckez Adam <span id="score">0</span> fois !</p>
        <p id="message">Message</p>

        <button id="restart">Recommencer ?</button>
        <p id="partage">
          Partagez donc votre score pour montrez votre talent !
        </p>
      </div>

      <a href="#info" class="boutoninfo">Comment jouer ?</a>
    </section>

    <div id="barre"></div>
    <section id="ancreinfo" class="infoflex">
      <div id="info" class="info">
        <h2>Tcheckez Adam !</h2>
        <p>
          Jouer au jeu du tcheck, c'est simple ! Il suffit de tcheckez Adam le
          plus possible en 10 secondes ! <br />
          Vous pouvez sois utiliser le clic dans la zone sois la barre espace.
          Bonne chance !
        </p>
      </div>
    </section>

    <script>
      // Sélection des éléments
      const commencerButton = document.getElementById("commencer");
      const jeuButton = document.getElementById("jeu");
      const finDiv = document.getElementById("fin");
      const restartButton = document.getElementById("restart");
      const scoreSpan = document.getElementById("score");
      const retourButton = document.getElementById("boutonretour");
      const timerP = document.getElementById("timer");
      const messageP = document.getElementById("message");

      let score = 0;
      let timer;

      // Cacher le bouton jeu et la div fin au début
      jeuButton.style.display = "none";
      finDiv.style.display = "none";

      // Gérer le clic sur le bouton commencer
      commencerButton.addEventListener("click", function () {
        // Cacher le bouton commencer
        commencerButton.style.display = "none";
        retourButton.style.display = "none";

        // Réinitialiser le score
        score = 0;
        scoreSpan.textContent = score;

        // Démarrer le décompte de 3 secondes
        let countdown = 3;
        jeuButton.style.display = "block";
        const countdownInterval = setInterval(function () {
          jeuButton.textContent = countdown;
          countdown--;
          if (countdown < 0) {
            clearInterval(countdownInterval);
            timerP.style.visibility = "visible";

            // Montrer le bouton jeu
            jeuButton.textContent = score;

            // Gérer le clic sur le bouton jeu
            const incrementScore = function () {
              score += 1;
              scoreSpan.textContent = score;
              jeuButton.textContent = score; // Afficher le score dans le bouton
            };
            jeuButton.addEventListener("click", incrementScore);

            // Gérer la touche espace
            const handleSpace = function (event) {
              if (
                event.code === "Space" &&
                document.activeElement !== jeuButton
              ) {
                incrementScore();
              }
            };
            window.addEventListener("keyup", handleSpace);

            // Démarrer le timer de 10 secondes
            let remainingTime = 10;
            timerP.textContent = "Temps restant : " + remainingTime + "s";
            timer = setInterval(function () {
              remainingTime--;
              timerP.textContent = "Temps restant : " + remainingTime + "s";
              if (remainingTime <= 0) {
                // Cacher le bouton jeu et montrer la div fin
                jeuButton.style.display = "none";
                finDiv.style.display = "block";
                retourButton.style.display = "block";
                timerP.style.visibility = "hidden";
                // Arrêter le timer
                clearInterval(timer);

                // Supprimer les écouteurs d'événements
                jeuButton.removeEventListener("click", incrementScore);
                window.removeEventListener("keyup", handleSpace);

                if (score < 10) {
                  messageP.textContent = "Vous avez jouez au moins ?";
                } else if (score < 20) {
                  messageP.textContent =
                    "Pas fou... A part si vous avez 70 ans";
                } else if (score < 30) {
                  messageP.textContent =
                    "Mouais bof... Je pense que vous devriez consulter";
                } else if (score < 40) {
                  messageP.textContent = "On se rapproche... de la moyenne...";
                } else if (score < 50) {
                  messageP.textContent = "C'est même pas moyen...";
                } else if (score < 60) {
                  messageP.textContent =
                    "Vous êtes quelqu'un de presque moyen ! Vous y êtes presque !";
                } else if (score < 70) {
                  messageP.textContent = "Vous êtes moyen.";
                } else if (score < 80) {
                  messageP.textContent = "Oh ! C'est presque impressionnant !";
                } else if (score < 90) {
                  messageP.textContent =
                    "Alors là, si vous n'avez pas Parkinson, c'est très impressionnant !";
                } else {
                  messageP.textContent =
                    "Vous êtes un vrai dieu vivant du clic ! Ou un autoclicker...";
                }
              }
            }, 1000);
          }
        }, 1000);
      });

      document.getElementById("restart").addEventListener("click", function () {
        // Cacher la div fin et montrer le bouton commencer
        finDiv.style.display = "none";
        commencerButton.style.display = "block";

        // Arrêter le timer
        clearInterval(timer);
      });
    </script>
  </body>
</html>
